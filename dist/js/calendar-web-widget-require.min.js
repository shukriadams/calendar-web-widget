/* calendar-web-widget | https://github.com/shukriadams/calendar-web-widget | License : GPLv2 */
define("calendar-web-widget",[],function(){"use strict";var a=function(a){function b(){if(!kb){3===ob.toString().length&&(ob+=1900),I=H.querySelectorAll(".js-calendar")[0].style,c(),J=H.querySelectorAll(".js-selectMonth")[0].style,K=H.querySelectorAll(".js-selectYear")[0].style,R=!1,S=!1,1==db&&(H.querySelectorAll(".js-lblToday")[0].innerHTML=fb+" <a title='"+eb+"' style='"+vb+"' class='js-focus-today' href='javascript:void(0)'>"+tb[lb.getDay()-bb==-1?6:lb.getDay()-bb]+", "+mb+" "+ub[nb].substring(0,3)+"	"+ob+"</a>");var a="<div style='border-width:0;cursor:pointer' class='js-decMonth header-button'>&nbsp<div class='left-arrow'></div>&nbsp</div>&nbsp;";a+="<div style='border-width:0;cursor:pointer' class='js-incMonth header-button'>&nbsp<div class='right-arrow'></div>&nbsp</div>&nbsp",a+="<div class='js-spanMonth header-button' style='border-width:0;cursor:pointer'></div>&nbsp;",a+="<div class='js-spanYear header-button' style='border-width:0;cursor:pointer'></div>&nbsp;",H.querySelectorAll(".js-caption")[0].innerHTML=a,hb=!0}}function c(){null!=I&&(I.visibility="hidden"),null!=J&&(J.visibility="hidden"),null!=K&&(K.visibility="hidden"),pb=!1}function d(a){return 10>a?"0"+a:a}function e(a,b,c){var e=Z;return e=e.replace("dd","<e>"),e=e.replace("d","<d>"),e=e.replace("<e>",d(a)),e=e.replace("<d>",a),e=e.replace("mmm","<o>"),e=e.replace("mm","<n>"),e=e.replace("m","<m>"),e=e.replace("<m>",b+1),e=e.replace("<n>",d(b+1)),e=e.replace("<o>",ub[b]),e.replace("yyyy",c)}function f(){c();var a=e(N,L,M),b=X.getAttribute("data-value");b!=a&&(X.setAttribute("data-value",a),X.hasAttribute("value")?X.value=a:X.innerHTML=a,E&&E(G,{date:a}))}function g(){T=setInterval("decMonth()",80)}function h(){T=setInterval("incMonth()",80)}function i(){L++,L>11&&(L=0,M++),w()}function j(){L--,0>L&&(L=11,M--),w()}function k(){if(t(),!R){for(var a="",b=0;12>b;b++){var c=ub[b];b==L&&(c="<B>"+c+"</B>"),a+="<tr><td class='js-month month' data-month='"+b+"' id='m"+b+"' style='cursor:pointer'>&nbsp;"+c+"&nbsp;</td></tr>"}H.querySelectorAll(".js-selectMonth")[0].innerHTML="<table class='js-month-table dropdown month-dropdown'  cellspacing=0>"+a+"</table>";for(var d=H.querySelectorAll(".js-month"),e=0;e<d.length;e++){var f=d[e];A(f,"click",l)}var g=H.querySelectorAll(".js-month-table")[0];A(g,"mouseover",function(){clearTimeout(V)}),A(g,"mouseout",function(){clearTimeout(V),V=setTimeout(n,100),event.cancelBubble=!0}),R=!0}}function l(a){a.target||(a.target=a.srcElement),R=!1,L=parseInt(a.target.getAttribute("data-month")),w(),n(),a.cancelBubble=!0}function m(){k(),J.visibility=jb||ib?"visible":"show",J.left=parseInt(I.left)+50,J.top=parseInt(I.top)+26}function n(){J.visibility="hidden"}function o(){for(var a=0;7>a;a++){var b,c=a+$+1;b=c==M?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",H.querySelectorAll(".js-y"+a)[0].innerHTML=b}$++}function p(){for(var a=0;7>a;a++){var b,c=a+$-1;b=c==M?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",H.querySelectorAll(".js-y"+a)[0].innerHTML=b}$--}function q(a){M=parseInt(a+$),S=!1,w(),t()}function r(){if(n(),!S){var a="<tr><td align='center' class='js-year-dec dropdown-item' style='cursor:pointer'>-</td></tr>",b=0;$=M-3;for(var c=M-3;M+3>=c;c++){var d=c;c==M&&(d="<b>"+d+"</b>"),a+="<tr><td data-year='"+b+"' class='js-y"+b+" js-year dropdown-item' style='cursor:pointer'>&nbsp;"+d+"&nbsp;</td></tr>",b++}a+="<tr><td align='center' class='js-year-inc dropdown-item' style='cursor:pointer'>+</td></tr>",H.querySelectorAll(".js-selectYear")[0].innerHTML="<table class='dropdown year-dropdown js-year-dropdown' cellspacing=0>"+a+"</table>";for(var e=H.querySelectorAll(".js-year"),c=0;c<e.length;c++)A(e[c],"click",s);S=!0;var f=H.querySelectorAll(".js-year-inc")[0],g=H.querySelectorAll(".js-year-dropdown")[0],h=H.querySelectorAll(".js-year-dec")[0];A(g,"mouseover",function(){clearTimeout(W)}),A(g,"mouseout",function(){clearTimeout(W),W=setTimeout(t,100)}),A(f,"mouseout",function(){clearInterval(U)}),A(f,"mouseup",function(){clearInterval(U)}),A(f,"mousedown",function(){clearInterval(U),U=setInterval(o,30)}),A(h,"mouseout",function(){clearInterval(T)}),A(h,"mouseup",function(){clearInterval(T)}),A(h,"mousedown",function(){clearInterval(T),T=setInterval(p,30)})}}function s(a){a.target||(a.target=a.srcElement);var b=a.target.getAttribute("data-year");b=parseInt(b),q(b),event.cancelBubble=!0}function t(){clearInterval(T),clearTimeout(V),clearInterval(U),clearTimeout(W),K.visibility="hidden"}function u(){var a;r(),K.visibility=jb||ib?"visible":"show",a=parseInt(I.left)+H.querySelectorAll(".js-spanYear")[0].offsetLeft,ib&&(a+=6),K.left=a,K.top=parseInt(I.top)+26}function v(a){var b,c=a.getFullYear(),d=a.getMonth()+1;b=0==bb?a.getDate()+1:a.getDate();var e=Math.floor((14-d)/12),f=c+4800-e,g=d+12*e-3,h=Math.floor(f/4)-Math.floor(f/100)+Math.floor(f/400),i=b+Math.floor((153*g+2)/5)+365*f+h-32045,j=(i+31741-i%7)%146097%36524%1461,k=Math.floor(j/1460),l=(j-k)%365+k,m=Math.floor(l/7)+1;return m}function w(){var a,b,c,d=Array(31,0,31,30,31,30,31,31,30,31,30,31),e=new Date(M,L,1);1==L?(c=new Date(M,L+1,1),c=new Date(c-864e5),a=c.getDate()):a=d[L],b=e.getDay()-bb,0>b&&(b=6);var f="<table	class='innerTable' border=0><tr>";1==cb&&(f+="<td width=27><b>"+gb+"</b></td><td width=1 rowspan=7 bgcolor='#d0d0d0' style='padding:0px'></td>");for(var g=0;7>g;g++)f+="<td width='27' align='right'><B>"+tb[g]+"</B></td>";f+="</tr><tr>",1==cb&&(f+="<td align=right>"+v(e)+"&nbsp;</td>");for(var g=1;b>=g;g++)f+="<td>&nbsp;</td>";for(var h=1;a>=h;h++){b++,f+="<td align=right>";var i=vb;h==Q&&L==O&&M==P&&(i+=" "+wb);for(var j="",k=0;qb>k;k++)parseInt(rb[k].d)==h&&parseInt(rb[k].m)==L+1&&(0==parseInt(rb[k].y)||parseInt(rb[k].y)==M&&0!=parseInt(rb[k].y))&&(i+=" holiday",j+=""==j?rb[k].desc:"\n"+rb[k].desc);var l=/\"/g;j=j.replace(l,"&quot;"),f+=h==mb&&L==nb&&M==ob?'<b><a title="'+j+"\" class='"+i+"' href='javascript:void(0)'><font class='js-day' data-day='"+h+"' color=#ff0000>&nbsp;"+h+"</font>&nbsp;</a></b>":b%7==-1*bb+1?'<a title="'+j+"\" class='"+i+"' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"' color=#909090>"+h+"</font>&nbsp;</a>":'<a title="'+j+"\" class='"+i+"' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"' color=#548cab>"+h+"&nbsp;</a>",f+="",(b+bb)%7==bb&&(f+="</tr><tr>",1==cb&&a>h&&(f+="<td align=right>"+v(new Date(M,L,h+1))+"&nbsp;</td>"))}H.querySelectorAll(".js-content")[0].innerHTML=f,H.querySelectorAll(".js-spanMonth")[0].innerHTML="&nbsp;"+ub[L]+"&nbsp;<div class='down-arrow'></div>",H.querySelectorAll(".js-spanYear")[0].innerHTML="&nbsp;"+M+"&nbsp;<div class='down-arrow'></div>";for(var m=H.querySelectorAll(".js-day"),g=0;g<m.length;g++)A(m[g],"click",x)}function x(a){a.target||(a.target=a.srcElement),N=a.target.getAttribute("data-day"),f()}function y(a,b,d){var e=0,f=0;if(hb){if("hidden"==I.visibility){X=b,Z=d;var g=" ",h=Z.split(g);h.length<3&&(g="/",h=Z.split(g),h.length<3&&(g=".",h=Z.split(g),h.length<3&&(g="-",h=Z.split(g),h.length<3&&(g=""))));var i=0;if(""!=g){var j="";j=b.value?b.value.split(g):b.innerHTML.split(g);for(var k=0;3>k;k++)if("d"==h[k]||"dd"==h[k])N=parseInt(j[k],10),i++;else if("m"==h[k]||"mm"==h[k])L=parseInt(j[k],10)-1,i++;else if("yyyy"==h[k])M=parseInt(j[k],10),i++;else if("mmm"==h[k])for(var l=0;12>l;l++)j[k]==ub[l]&&(L=l,i++)}(3!=i||isNaN(N)||isNaN(L)||isNaN(M))&&(N=mb,L=nb,M=ob),Q=N,O=L,P=M;var m=a;do m=m.offsetParent,e+=m.offsetLeft,f+=m.offsetTop;while("BODY"!=m.tagName);I.left=-1==_?a.offsetLeft+e+3:_,I.top=-1==ab?a.offsetTop+f+a.offsetHeight+5:ab,w(1,L,M),I.visibility=jb||ib?"visible":"show",pb=!0}else c(),Y!=a&&y(a,b,d);Y=a}}function z(a){for(;;){if(!a.parentElement)return!1;if(a.parentElement==H)return!0;a=a.parentElement}}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&a.attachEvent("on"+b,c)}var B=a.el,C=a.host,D=a.value,E=a.onValueChanged,F=a.format||"dd/mm/yyyy",G=this,H=document.createElement("div");H.className="calendar-web-widget",C?C.appendChild(H):B.parentNode.insertBefore(H,B.nextSibling);var I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_=-1,ab=-1,bb=1,cb=0,db=1,eb="Go To Current Month",fb="Today is",gb="Wk",hb=!1,ib=document.all,jb=document.getElementById,kb=document.layers,lb=null;lb=D?new Date(Date.parse(D.replace(/-/g,"/"))):new Date;var mb=lb.getDate(),nb=lb.getMonth(),ob=lb.getYear(),pb=!1,qb=0,rb=[];if(jb){var sb="";sb+="<div class='js-calendar calendar-outer'><table cellspacing='0' class='maintable'><tr class='firstRow'><td><table class='headerTable'><tr><td class='header'><font color='#000000'><B><div class='js-caption header-button-wrapper'></div></B></font></td><td align=right><a href='javascript:void(0)'><span class='js-close close'></span></a></td></tr></table></td></tr><tr><td style='padding:5px' bgcolor=#ffffff><span class='js-content'></span></td></tr>",1===db&&(sb+="<tr class='today'><td style='padding:5px' align=center><span class='js-lblToday'></span></td></tr>"),sb+="</table></div><div class='js-selectMonth selectMenu'></div><div class='js-selectYear selectMenu'></div>",H.innerHTML=sb}var tb="",ub=["January","February","March","April","May","June","July","August","September","October","November","December"];tb=0===bb?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var vb=" anchor",wb=" bordered";b(),A(document,"keypress",function(){27==event.keyCode&&c()}),A(document,"click",function(a){a.target||(a.target=a.srcElement),a.target!=B&&pb&&!z(a.target)&&c()});var xb=H.querySelectorAll(".js-focus-today");xb.length>0&&(xb=xb[0],A(xb,"click",function(){L=nb,M=ob,w()})),A(H.querySelectorAll(".js-close")[0],"click",function(){f()}),A(H.querySelectorAll(".js-spanYear")[0],"click",function(){u()}),A(H.querySelectorAll(".js-spanMonth")[0],"click",function(){m()});var yb=H.querySelectorAll(".js-decMonth")[0];A(yb,"click",j),A(yb,"mouseout",function(){clearInterval(T)}),A(yb,"mousedown",function(){clearTimeout(V),V=setTimeout(g,500)}),A(yb,"mouseup",function(){clearTimeout(V),clearInterval(T)});var zb=H.querySelectorAll(".js-incMonth")[0];A(zb,"click",i),A(zb,"mouseout",function(){clearInterval(T)}),A(zb,"mousedown",function(){clearTimeout(V),V=setTimeout(h,500)}),A(zb,"mouseup",function(){clearTimeout(V),clearInterval(T)}),A(B,"click",function(){y(B,B,F)})};return a});