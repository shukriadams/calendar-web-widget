/* calendar-web-widget | https://github.com/shukriadams/calendar-web-widget | License : GPLv2 */
define("calendar-web-widget",[],function(){"use strict";var a=function(a){function b(){3===nb.toString().length&&(nb+=1900);var a="<div class='js-decMonth  header-button small'>&nbsp<div class='left-arrow'></div></div>";a+="<div class='js-incMonth header-button small'>&nbsp<div class='right-arrow'></div></div>",a+="<div class='header-button'><div class='js-spanMonth'></div><div class='js-selectMonth selectMenu'></div></div>",a+="<div class='header-button'><div class='js-spanYear'></div><div class='js-selectYear selectMenu'></div></div>",I.querySelectorAll(".js-caption")[0].innerHTML=a,J=I.querySelectorAll(".js-calendar")[0].style,c(),K=I.querySelectorAll(".js-selectMonth")[0].style,L=I.querySelectorAll(".js-selectYear")[0].style,S=!1,T=!1,F&&(I.querySelectorAll(".js-lblToday")[0].innerHTML=fb+" <a title='"+eb+"' style='"+ub+"' class='js-focus-today' href='javascript:void(0)'>"+sb[kb.getDay()-cb==-1?6:kb.getDay()-cb]+", "+lb+" "+tb[mb].substring(0,3)+"	"+nb+"</a>"),hb=!0}function c(){null!=J&&(J.visibility="hidden"),null!=K&&(K.visibility="hidden"),null!=L&&(L.visibility="hidden"),ob=!1}function d(a){return 10>a?"0"+a:a}function e(a,b,c){var e=$;return e=e.replace("dd","<e>"),e=e.replace("d","<d>"),e=e.replace("<e>",d(a)),e=e.replace("<d>",a),e=e.replace("mmm","<o>"),e=e.replace("mm","<n>"),e=e.replace("m","<m>"),e=e.replace("<m>",b+1),e=e.replace("<n>",d(b+1)),e=e.replace("<o>",tb[b]),e.replace("yyyy",c)}function f(){c();var a=e(O,M,N),b=Y.getAttribute("data-value");b!=a&&(Y.setAttribute("data-value",a),Y.hasAttribute("value")?Y.value=a:Y.innerHTML=a,E&&E(H,{date:a}))}function g(){U=setInterval("decMonth()",80)}function h(){U=setInterval("incMonth()",80)}function i(){M++,M>11&&(M=0,N++),w()}function j(){M--,0>M&&(M=11,N--),w()}function k(){if(t(),!S){for(var a="",b=0;12>b;b++){var c=tb[b];b==M&&(c="<B>"+c+"</B>"),a+="<tr><td class='js-month month dropdown-item' data-month='"+b+"' id='m"+b+"' style='cursor:pointer'>&nbsp;"+c+"&nbsp;</td></tr>"}I.querySelectorAll(".js-selectMonth")[0].innerHTML="<table class='js-month-table dropdown month-dropdown'  cellspacing=0>"+a+"</table>";for(var d=I.querySelectorAll(".js-month"),e=0;e<d.length;e++){var f=d[e];A(f,"click",l)}var g=I.querySelectorAll(".js-month-table")[0];A(g,"mouseover",function(){clearTimeout(W)}),A(g,"mouseout",function(){clearTimeout(W),W=setTimeout(n,100),event.cancelBubble=!0}),S=!0}}function l(a){a.target||(a.target=a.srcElement),S=!1,M=parseInt(a.target.getAttribute("data-month")),w(),n(),a.cancelBubble=!0}function m(){k(),K.visibility=jb||ib?"visible":"show"}function n(){K.visibility="hidden"}function o(){for(var a=0;7>a;a++){var b,c=a+_+1;b=c==N?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",I.querySelectorAll(".js-y"+a)[0].innerHTML=b}_++}function p(){for(var a=0;7>a;a++){var b,c=a+_-1;b=c==N?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",I.querySelectorAll(".js-y"+a)[0].innerHTML=b}_--}function q(a){N=parseInt(a+_),T=!1,w(),t()}function r(){if(n(),!T){var a="<tr><td align='center' class='js-year-dec dropdown-item' style='cursor:pointer'>-</td></tr>",b=0;_=N-3;for(var c=N-3;N+3>=c;c++){var d=c;c==N&&(d="<b>"+d+"</b>"),a+="<tr><td data-year='"+b+"' class='js-y"+b+" js-year dropdown-item' style='cursor:pointer'>&nbsp;"+d+"&nbsp;</td></tr>",b++}a+="<tr><td align='center' class='js-year-inc dropdown-item' style='cursor:pointer'>+</td></tr>",I.querySelectorAll(".js-selectYear")[0].innerHTML="<table class='dropdown year-dropdown js-year-dropdown' cellspacing=0>"+a+"</table>";for(var e=I.querySelectorAll(".js-year"),c=0;c<e.length;c++)A(e[c],"click",s);T=!0;var f=I.querySelectorAll(".js-year-inc")[0],g=I.querySelectorAll(".js-year-dropdown")[0],h=I.querySelectorAll(".js-year-dec")[0];A(g,"mouseover",function(){clearTimeout(X)}),A(g,"mouseout",function(){clearTimeout(X),X=setTimeout(t,100)}),A(f,"mouseout",function(){clearInterval(V)}),A(f,"mouseup",function(){clearInterval(V)}),A(f,"mousedown",function(){clearInterval(V),V=setInterval(o,30)}),A(h,"mouseout",function(){clearInterval(U)}),A(h,"mouseup",function(){clearInterval(U)}),A(h,"mousedown",function(){clearInterval(U),U=setInterval(p,30)})}}function s(a){a.target||(a.target=a.srcElement);var b=a.target.getAttribute("data-year");b=parseInt(b),q(b),event.cancelBubble=!0}function t(){clearInterval(U),clearTimeout(W),clearInterval(V),clearTimeout(X),L.visibility="hidden"}function u(){var a;r(),L.visibility=jb||ib?"visible":"show",a=parseInt(J.left)+I.querySelectorAll(".js-spanYear")[0].offsetLeft,ib&&(a+=6)}function v(a){var b,c=a.getFullYear(),d=a.getMonth()+1;b=0==cb?a.getDate()+1:a.getDate();var e=Math.floor((14-d)/12),f=c+4800-e,g=d+12*e-3,h=Math.floor(f/4)-Math.floor(f/100)+Math.floor(f/400),i=b+Math.floor((153*g+2)/5)+365*f+h-32045,j=(i+31741-i%7)%146097%36524%1461,k=Math.floor(j/1460),l=(j-k)%365+k,m=Math.floor(l/7)+1;return m}function w(){var a,b,c,d=Array(31,0,31,30,31,30,31,31,30,31,30,31),e=new Date(N,M,1);1==M?(c=new Date(N,M+1,1),c=new Date(c-864e5),a=c.getDate()):a=d[M],b=e.getDay()-cb,0>b&&(b=6);var f="<table	class='innerTable' border=0><tr>";1==db&&(f+="<td width=27><b>"+gb+"</b></td><td width=1 rowspan=7 bgcolor='#d0d0d0' style='padding:0px'></td>");for(var g=0;7>g;g++)f+="<td width='27' align='right'><B>"+sb[g]+"</B></td>";f+="</tr><tr>",1==db&&(f+="<td align=right>"+v(e)+"&nbsp;</td>");for(var g=1;b>=g;g++)f+="<td>&nbsp;</td>";for(var h=1;a>=h;h++){b++,f+="<td align=right>";var i=ub;h==R&&M==P&&N==Q&&(i+=" "+vb);for(var j="",k=0;pb>k;k++)parseInt(qb[k].d)==h&&parseInt(qb[k].m)==M+1&&(0==parseInt(qb[k].y)||parseInt(qb[k].y)==N&&0!=parseInt(qb[k].y))&&(i+=" holiday",j+=""==j?qb[k].desc:"\n"+qb[k].desc);var l=/\"/g;j=j.replace(l,"&quot;"),f+=h==lb&&M==mb&&N==nb?'<b><a title="'+j+"\" class='"+i+" day today' href='javascript:void(0)'><font class='js-day' data-day='"+h+"'>&nbsp;"+h+"</font>&nbsp;</a></b>":b%7==-1*cb+1?'<a title="'+j+"\" class='"+i+" day sunday' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"'>"+h+"</font>&nbsp;</a>":'<a title="'+j+"\" class='"+i+" day' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"' >"+h+"&nbsp;</a>",f+="",(b+cb)%7==cb&&(f+="</tr><tr>",1==db&&a>h&&(f+="<td align=right>"+v(new Date(N,M,h+1))+"&nbsp;</td>"))}I.querySelectorAll(".js-content")[0].innerHTML=f,I.querySelectorAll(".js-spanMonth")[0].innerHTML="&nbsp;"+tb[M]+"&nbsp;<div class='down-arrow'></div>",I.querySelectorAll(".js-spanYear")[0].innerHTML="&nbsp;"+N+"&nbsp;<div class='down-arrow'></div>";for(var m=I.querySelectorAll(".js-day"),g=0;g<m.length;g++)A(m[g],"click",x)}function x(a){a.target||(a.target=a.srcElement),O=a.target.getAttribute("data-day"),f()}function y(a,b,d){var e=0,f=0;if(hb){if("hidden"==J.visibility){Y=b,$=d;var g=" ",h=$.split(g);h.length<3&&(g="/",h=$.split(g),h.length<3&&(g=".",h=$.split(g),h.length<3&&(g="-",h=$.split(g),h.length<3&&(g=""))));var i=0;if(""!=g){var j="";j=b.value?b.value.split(g):b.innerHTML.split(g);for(var k=0;3>k;k++)if("d"==h[k]||"dd"==h[k])O=parseInt(j[k],10),i++;else if("m"==h[k]||"mm"==h[k])M=parseInt(j[k],10)-1,i++;else if("yyyy"==h[k])N=parseInt(j[k],10),i++;else if("mmm"==h[k])for(var l=0;12>l;l++)j[k]==tb[l]&&(M=l,i++)}(3!=i||isNaN(O)||isNaN(M)||isNaN(N))&&(O=lb,M=mb,N=nb),R=O,P=M,Q=N;var m=a;do m=m.offsetParent,e+=m.offsetLeft,f+=m.offsetTop;while("BODY"!=m.tagName);J.left=-1==ab?a.offsetLeft+e+3:ab,J.top=-1==bb?a.offsetTop+f+a.offsetHeight+5:bb,w(1,M,N),J.visibility=jb||ib?"visible":"show",ob=!0}else c(),Z!=a&&y(a,b,d);Z=a}}function z(a){for(;;){if(!a.parentElement)return!1;if(a.parentElement==I)return!0;a=a.parentElement}}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&a.attachEvent("on"+b,c)}var B=a.el,C=a.host,D=a.value,E=a.onValueChanged,F=void 0==a.showToday?!0:a.showToday,G=a.format||"dd/mm/yyyy",H=this,I=document.createElement("div");I.className="calendar-web-widget",C?C.appendChild(I):B.parentNode.insertBefore(I,B.nextSibling);var J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab=-1,bb=-1,cb=1,db=0,eb="Go To Current Month",fb="Today is",gb="Wk",hb=!1,ib=document.all,jb=document.getElementById,kb=null;kb=D?new Date(Date.parse(D.replace(/-/g,"/"))):new Date;var lb=kb.getDate(),mb=kb.getMonth(),nb=kb.getYear(),ob=!1,pb=0,qb=[];if(jb){var rb="<div class='js-calendar calendar-outer'><div><table class='headerTable'><tr><td><div class='js-caption header-button-wrapper'></div></td><td align=right style='vertical-align:top;'><a href='javascript:void(0)' style='text-decoration:none;'><span class='js-close close'></span></a></td></tr></table></div><div style='padding:5px' bgcolor=#ffffff><span class='js-content'></span></div>";F&&(rb+="<div class='today-footer' style='padding:5px' align=center><span class='js-lblToday'></span></div>"),rb+="</div>",I.innerHTML=rb}var sb="",tb=["January","February","March","April","May","June","July","August","September","October","November","December"];sb=0===cb?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var ub=" anchor",vb=" bordered";b(),A(document,"keypress",function(){27==event.keyCode&&c()}),A(document,"click",function(a){a.target||(a.target=a.srcElement),a.target!=B&&ob&&!z(a.target)&&c()});var wb=I.querySelectorAll(".js-focus-today");wb.length>0&&(wb=wb[0],A(wb,"click",function(){M=mb,N=nb,w()})),A(I.querySelectorAll(".js-close")[0],"click",function(){f()}),A(I.querySelectorAll(".js-spanYear")[0],"click",function(){u()}),A(I.querySelectorAll(".js-spanMonth")[0],"click",function(){m()});var xb=I.querySelectorAll(".js-decMonth")[0];A(xb,"click",j),A(xb,"mouseout",function(){clearInterval(U)}),A(xb,"mousedown",function(){clearTimeout(W),W=setTimeout(g,500)}),A(xb,"mouseup",function(){clearTimeout(W),clearInterval(U)});var yb=I.querySelectorAll(".js-incMonth")[0];A(yb,"click",i),A(yb,"mouseout",function(){clearInterval(U)}),A(yb,"mousedown",function(){clearTimeout(W),W=setTimeout(h,500)}),A(yb,"mouseup",function(){clearTimeout(W),clearInterval(U)}),A(B,"click",function(){y(B,B,G)})};return a});