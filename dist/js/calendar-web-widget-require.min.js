/* calendar-web-widget | https://github.com/shukriadams/calendar-web-widget | License : GPLv2 */
define("calendar-web-widget",[],function(){"use strict";var a=function(a){function b(){E||tb.classList.add("calendar-web-widget--hidden"),m(),s(),nb=!1}function c(a){return 10>a?"0"+a:a}function d(a,b,d){var e=bb;return e=e.replace("dd","<e>"),e=e.replace("d","<d>"),e=e.replace("<e>",c(a)),e=e.replace("<d>",a),e=e.replace("mmm","<o>"),e=e.replace("mm","<n>"),e=e.replace("m","<m>"),e=e.replace("<m>",b+1),e=e.replace("<n>",c(b+1)),e=e.replace("<o>",I[b]),e.replace("yyyy",d)}function e(){b();var a=d(T,R,S),c=_.getAttribute("data-value");c!=a&&(_.setAttribute("data-value",a),_.hasAttribute("value")?_.value=a:_.innerHTML=a,G&&G(N,{date:a}))}function f(){X=setInterval("decMonth()",80)}function g(){X=setInterval("incMonth()",80)}function h(){R++,R>11&&(R=0,S++),v()}function i(){R--,0>R&&(R=11,S--),v()}function j(){if(s(),!ib){for(var a="",b=0;12>b;b++){var c=I[b];b==R&&(c="<B>"+c+"</B>"),a+="<tr><td class='js-month month dropdown-item' data-month='"+b+"' id='m"+b+"' style='cursor:pointer'>&nbsp;"+c+"&nbsp;</td></tr>"}B(".js-selectMonth").innerHTML="<table class='js-month-table dropdown month-dropdown'  cellspacing=0>"+a+"</table>";for(var d=B(".js-month"),e=0;e<d.length;e++){var f=d[e];A(f,"click",k)}var g=B(".js-month-table");A(g,"mouseover",function(){clearTimeout(Z)}),A(g,"mouseout",function(){clearTimeout(Z),Z=setTimeout(m,100),event.cancelBubble=!0}),ib=!0}}function k(a){a.target||(a.target=a.srcElement),R=parseInt(a.target.getAttribute("data-month")),v(),m(),a.cancelBubble=!0}function l(){j(),P&&P.classList.remove("calendar-web-widget--hidden")}function m(){P&&P.classList.add("calendar-web-widget--hidden"),jb=!1}function n(){for(var a=0;7>a;a++){var b,c=a+cb+1;b=c==S?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",B(".js-y"+a).innerHTML=b}cb++}function o(){for(var a=0;7>a;a++){var b,c=a+cb-1;b=c==S?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",B(".js-y"+a).innerHTML=b}cb--}function p(a){S=parseInt(a+cb),v(),s()}function q(){if(m(),!kb){var a="<tr><td align='center' class='js-year-dec dropdown-item' style='cursor:pointer'>-</td></tr>",b=0;cb=S-3;for(var c=S-3;S+3>=c;c++){var d=c;c==S&&(d="<b>"+d+"</b>"),a+="<tr><td data-year='"+b+"' class='js-y"+b+" js-year dropdown-item' style='cursor:pointer'>&nbsp;"+d+"&nbsp;</td></tr>",b++}a+="<tr><td align='center' class='js-year-inc dropdown-item' style='cursor:pointer'>+</td></tr>",B(".js-selectYear").innerHTML="<table class='dropdown year-dropdown js-year-dropdown' cellspacing=0>"+a+"</table>";for(var e=B(".js-year"),c=0;c<e.length;c++)A(e[c],"click",r);kb=!0;var f=B(".js-year-inc"),g=B(".js-year-dropdown"),h=B(".js-year-dec");A(g,"mouseover",function(){clearTimeout($)}),A(g,"mouseout",function(){clearTimeout($),$=setTimeout(s,100)}),A(f,"mouseout",function(){clearInterval(Y)}),A(f,"mouseup",function(){clearInterval(Y)}),A(f,"mousedown",function(){clearInterval(Y),Y=setInterval(n,30)}),A(h,"mouseout",function(){clearInterval(X)}),A(h,"mouseup",function(){clearInterval(X)}),A(h,"mousedown",function(){clearInterval(X),X=setInterval(o,30)})}}function r(a){a.target||(a.target=a.srcElement);var b=a.target.getAttribute("data-year");b=parseInt(b),p(b),event.cancelBubble=!0}function s(){clearInterval(X),clearTimeout(Z),clearInterval(Y),clearTimeout($),Q&&Q.classList.add("calendar-web-widget--hidden"),lb=!1}function t(){q(),Q&&Q.classList.remove("calendar-web-widget--hidden")}function u(a){var b,c=a.getFullYear(),d=a.getMonth()+1;b=K?a.getDate():a.getDate()+1;var e=Math.floor((14-d)/12),f=c+4800-e,g=d+12*e-3,h=Math.floor(f/4)-Math.floor(f/100)+Math.floor(f/400),i=b+Math.floor((153*g+2)/5)+365*f+h-32045,j=(i+31741-i%7)%146097%36524%1461,k=Math.floor(j/1460),l=(j-k)%365+k,m=Math.floor(l/7)+1;return m}function v(){var a,b,c,d=Array(31,0,31,30,31,30,31,31,30,31,30,31),e=new Date(S,R,1);1==R?(c=new Date(S,R+1,1),c=new Date(c-864e5),a=c.getDate()):a=d[R],b=e.getDay()-db,0>b&&(b=6);var f="<table	class='innerTable' border=0><tr>";1==eb&&(f+="<td width=27><b>"+hb+"</b></td><td width=1 rowspan=7 bgcolor='#d0d0d0' style='padding:0px'></td>");for(var g=0;7>g;g++)f+="<td width='27' align='right'><B>"+J[g]+"</B></td>";f+="</tr><tr>",1==eb&&(f+="<td align=right>"+u(e)+"&nbsp;</td>");for(var g=1;b>=g;g++)f+="<td>&nbsp;</td>";for(var h=1;a>=h;h++){b++,f+="<td align=right>";var i="";h==W&&R==U&&S==V&&(i+=" calendar-web-widget-bordered ");var j="",k=/\"/g;j=j.replace(k,"&quot;"),f+=h==pb&&R==qb&&S==rb?'<b><a title="'+j+"\" class='"+i+" day today' href='javascript:void(0)'><font class='js-day' data-day='"+h+"'>&nbsp;"+h+"</font>&nbsp;</a></b>":b%7==-1*db+1?'<a title="'+j+"\" class='"+i+" day sunday' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"'>"+h+"</font>&nbsp;</a>":'<a title="'+j+"\" class='"+i+" day' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"' >"+h+"&nbsp;</a>",f+="",(b+db)%7==db&&(f+="</tr><tr>",1==eb&&a>h&&(f+="<td align=right>"+u(new Date(S,R,h+1))+"&nbsp;</td>"))}B(".js-calendar-web-widget-content").innerHTML=f,L&&(B(".js-spanMonth").innerHTML="<div class='down-arrow'></div>"+I[R],B(".js-spanYear").innerHTML="<div class='down-arrow'></div>"+S);for(var l=B(".js-day"),g=0;g<l.length;g++)A(l[g],"click",w)}function w(a){a.target||(a.target=a.srcElement),T=a.target.getAttribute("data-day"),e()}function x(){return!tb.classList.contains("calendar-web-widget--hidden")}function y(a,c,d){var e=0,f=0;if(mb){if(x())b();else{_=c,bb=d;var g=" ",h=bb.split(g);h.length<3&&(g="/",h=bb.split(g),h.length<3&&(g=".",h=bb.split(g),h.length<3&&(g="-",h=bb.split(g),h.length<3&&(g=""))));var i=0;if(""!=g){var j="";j=c.value?c.value.split(g):c.innerHTML.split(g);for(var k=0;3>k;k++)if("d"==h[k]||"dd"==h[k])T=parseInt(j[k],10),i++;else if("m"==h[k]||"mm"==h[k])R=parseInt(j[k],10)-1,i++;else if("yyyy"==h[k])S=parseInt(j[k],10),i++;else if("mmm"==h[k])for(var l=0;12>l;l++)j[k]==I[l]&&(R=l,i++)}(3!=i||isNaN(T)||isNaN(R)||isNaN(S))&&(T=pb,R=qb,S=rb),W=T,U=R,V=S;var m=a;do m=m.offsetParent,e+=m.offsetLeft,f+=m.offsetTop;while("BODY"!=m.tagName);v(1,R,S),tb.classList.remove("calendar-web-widget--hidden"),nb=!0}ab=a}}function z(a){for(;;){if(!a.parentElement)return!1;if(a.parentElement==O)return!0;a=a.parentElement}}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b){void 0===b&&(b=O);var c=b.querySelectorAll(a);return 0===c.length?null:1===c.length?c[0]:c}var C=a.el,D=a.host,E=void 0===a.inline?!1:a.inline,F=a.value,G=a.onValueChanged,H=void 0===a.showToday?!0:a.showToday,I=a.months||["January","February","March","April","May","June","July","August","September","October","November","December"],J=a.days||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K=void 0===a.startAtMonday?!0:a.startAtMonday,L=void 0===a.showMonthAndYearPickers?!1:a.showMonthAndYearPickers,M=a.format||"dd/mm/yyyy";E=!1;var N=this,O=document.createElement("div");O.className="calendar-web-widget",D?D.appendChild(O):C.parentNode.insertBefore(O,C.nextSibling);var P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db=K?1:0,eb=0,fb="Go To Current Month",gb="Today is",hb="Wk",ib=!1,jb=!1,kb=!1,lb=!1,mb=!1,nb=!1,ob=null;ob=F?new Date(Date.parse(F.replace(/-/g,"/"))):new Date;var pb=ob.getDate(),qb=ob.getMonth(),rb=ob.getYear();3===rb.toString().length&&(rb+=1900),K&&(J.push(J[0]),J.splice(0,1));var sb="<div class='js-calendar-web-widget-container calendar-web-widget-container "+(E?"calendar-web-widget-container--inline":"calendar-web-widget-container--float")+"'><div class='js-calendar-web-widget-header calendar-web-widget-header'></div><div class='js-calendar-web-widget-content calendar-web-widget-content'></div>";H&&(sb+="<div class='today-footer js-lblToday '></div>"),sb+="</div>",O.innerHTML=sb;var tb=B(".js-calendar-web-widget-container");sb="<div class='js-decMonth header-item prev'><div class='left-arrow'></div></div>",L&&(sb+="<div class='header-item'><div class='js-calendar-web-widget-month-container calendar-web-widget-month-container'><div class='js-spanMonth'></div><div class='js-selectMonth selectMenu'></div></div></div>",sb+="<div class='header-item'><div class='js-calendar-web-widget-year-container calendar-web-widget-year-container'><div class='js-spanYear'></div><div class='js-selectYear selectMenu'></div></div></div>"),sb+="<div class='js-incMonth header-item next'><div class='right-arrow'></div></div>",B(".js-calendar-web-widget-header").innerHTML=sb,L&&(P=B(".js-selectMonth"),Q=B(".js-selectYear")),H&&(B(".js-lblToday").innerHTML=gb+" <a title='"+fb+"' class='js-focus-today' href='javascript:void(0)'>"+J[ob.getDay()-db==-1?6:ob.getDay()-db]+", "+pb+" "+I[qb].substring(0,3)+"	"+rb+"</a>"),mb=!0,b(),A(document,"keypress",function(){27==event.keyCode&&b()}),A(document,"click",function(a){a.target||(a.target=a.srcElement),a.target!=C&&nb&&!z(a.target)&&b()});var ub=B(".js-focus-today");ub&&A(ub,"click",function(){R=qb,S=rb,v()}),L&&(A(B(".js-calendar-web-widget-year-container"),"click",function(){lb?s():t()}),A(B(".js-calendar-web-widget-month-container"),"click",function(){jb?m():l()}));var vb=B(".js-decMonth");A(vb,"click",i),A(vb,"mouseout",function(){clearInterval(X)}),A(vb,"mousedown",function(){clearTimeout(Z),Z=setTimeout(f,500)}),A(vb,"mouseup",function(){clearTimeout(Z),clearInterval(X)});var wb=B(".js-incMonth");A(wb,"click",h),A(wb,"mouseout",function(){clearInterval(X)}),A(wb,"mousedown",function(){clearTimeout(Z),Z=setTimeout(g,500)}),A(wb,"mouseup",function(){clearTimeout(Z),clearInterval(X)}),A(C,"click",function(){y(C,C,M)})};return a});