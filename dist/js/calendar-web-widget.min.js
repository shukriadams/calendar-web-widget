/* calendar-web-widget | https://github.com/shukriadams/calendar-web-widget | License : GPLv2 */
"use strict";var Calendar=function(a){function b(){E||sb.classList.add("calendar--hidden"),m(),s(),mb=!1}function c(a){return 10>a?"0"+a:a}function d(a,b,d){var e=db;return e=e.replace("dd","<e>"),e=e.replace("d","<d>"),e=e.replace("<e>",c(a)),e=e.replace("<d>",a),e=e.replace("mmm","<o>"),e=e.replace("mm","<n>"),e=e.replace("m","<m>"),e=e.replace("<m>",b+1),e=e.replace("<n>",c(b+1)),e=e.replace("<o>",I[b]),e.replace("yyyy",d)}function e(){b();var a=d(V,T,U),c=bb.getAttribute("data-value");c!=a&&(bb.setAttribute("data-value",a),bb.hasAttribute("value")?bb.value=a:bb.innerHTML=a,G&&G(P,{date:a}))}function f(){Z=setInterval("decMonth()",80)}function g(){Z=setInterval("incMonth()",80)}function h(){T++,T>11&&(T=0,U++),v()}function i(){T--,0>T&&(T=11,U--),v()}function j(){if(s(),!ib){for(var a="",b=0;12>b;b++){var c=I[b];b==T&&(c="<B>"+c+"</B>"),a+="<tr><td class='js-month month calendar-dropdown-item' data-month='"+b+"' id='m"+b+"' style='cursor:pointer'>&nbsp;"+c+"&nbsp;</td></tr>"}B(".js-selectMonth").innerHTML="<table class='js-month-table calendar-dropdown calendar-dropdown-month' cellspacing=0>"+a+"</table>";for(var d=B(".js-month"),e=0;e<d.length;e++){var f=d[e];A(f,"click",k)}var g=B(".js-month-table");A(g,"mouseover",function(){clearTimeout(_)}),A(g,"mouseout",function(){clearTimeout(_),_=setTimeout(m,100),event.cancelBubble=!0}),ib=!0}}function k(a){a.target||(a.target=a.srcElement),T=parseInt(a.target.getAttribute("data-month")),v(),m(),a.cancelBubble=!0}function l(){j(),R&&R.classList.remove("calendar--hidden")}function m(){R&&R.classList.add("calendar--hidden"),jb=!1}function n(){for(var a=0;7>a;a++){var b,c=a+eb+1;b=c==U?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",B(".js-y"+a).innerHTML=b}eb++}function o(){for(var a=0;7>a;a++){var b,c=a+eb-1;b=c==U?"&nbsp;<B>"+c+"</B>&nbsp;":"&nbsp;"+c+"&nbsp;",B(".js-y"+a).innerHTML=b}eb--}function p(a){U=parseInt(a+eb),v(),s()}function q(){if(m(),!kb){var a="<tr><td align='center' class='js-year-dec calendar-dropdown-item' style='cursor:pointer'>-</td></tr>",b=0;eb=U-3;for(var c=U-3;U+3>=c;c++){var d=c;c==U&&(d="<b>"+d+"</b>"),a+="<tr><td data-year='"+b+"' class='js-y"+b+" js-year calendar-dropdown-item' style='cursor:pointer'>&nbsp;"+d+"&nbsp;</td></tr>",b++}a+="<tr><td align='center' class='js-year-inc calendar-dropdown-item' style='cursor:pointer'>+</td></tr>",B(".js-selectYear").innerHTML="<table class='calendar-dropdown calendar-dropdown-year js-year-dropdown' cellspacing=0>"+a+"</table>";for(var e=B(".js-year"),c=0;c<e.length;c++)A(e[c],"click",r);kb=!0;var f=B(".js-year-inc"),g=B(".js-year-dropdown"),h=B(".js-year-dec");A(g,"mouseover",function(){clearTimeout(ab)}),A(g,"mouseout",function(){clearTimeout(ab),ab=setTimeout(s,100)}),A(f,"mouseout",function(){clearInterval($)}),A(f,"mouseup",function(){clearInterval($)}),A(f,"mousedown",function(){clearInterval($),$=setInterval(n,30)}),A(h,"mouseout",function(){clearInterval(Z)}),A(h,"mouseup",function(){clearInterval(Z)}),A(h,"mousedown",function(){clearInterval(Z),Z=setInterval(o,30)})}}function r(a){a.target||(a.target=a.srcElement);var b=a.target.getAttribute("data-year");b=parseInt(b),p(b),event.cancelBubble=!0}function s(){clearInterval(Z),clearTimeout(_),clearInterval($),clearTimeout(ab),S&&S.classList.add("calendar--hidden"),lb=!1}function t(){q(),S&&S.classList.remove("calendar--hidden")}function u(a){var b,c=a.getFullYear(),d=a.getMonth()+1;b=M?a.getDate():a.getDate()+1;var e=Math.floor((14-d)/12),f=c+4800-e,g=d+12*e-3,h=Math.floor(f/4)-Math.floor(f/100)+Math.floor(f/400),i=b+Math.floor((153*g+2)/5)+365*f+h-32045,j=(i+31741-i%7)%146097%36524%1461,k=Math.floor(j/1460),l=(j-k)%365+k,m=Math.floor(l/7)+1;return m}function v(){var a,b,c,d=Array(31,0,31,30,31,30,31,31,30,31,30,31),e=new Date(U,T,1);1==T?(c=new Date(U,T+1,1),c=new Date(c-864e5),a=c.getDate()):a=d[T],b=e.getDay()-fb,0>b&&(b=6);var f="<table class='calendar-calendar' border=0><tr>";1==gb&&(f+="<td width=27><b>"+hb+"</b></td><td width=1 rowspan=7 bgcolor='#d0d0d0' style='padding:0px'></td>");for(var g=0;7>g;g++)f+="<td width='27' align='right'><B>"+J[g]+"</B></td>";f+="</tr><tr>",1==gb&&(f+="<td align=right>"+u(e)+"&nbsp;</td>");for(var g=1;b>=g;g++)f+="<td>&nbsp;</td>";for(var h=1;a>=h;h++){b++,f+="<td align=right>";var i="";h==Y&&T==W&&U==X&&(i+=" calendar-bordered ");var j="",k=/\"/g;j=j.replace(k,"&quot;"),f+=h==ob&&T==pb&&U==qb?'<b><a title="'+j+"\" class='"+i+" calendar-day calendar-today' href='javascript:void(0)'><font class='js-day' data-day='"+h+"'>&nbsp;"+h+"</font>&nbsp;</a></b>":b%7==-1*fb+1?'<a title="'+j+"\" class='"+i+" calendar-day calendar-sunday' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"'>"+h+"</font>&nbsp;</a>":'<a title="'+j+"\" class='"+i+" calendar-day' href='javascript:void(0)'>&nbsp;<font class='js-day' data-day='"+h+"' >"+h+"&nbsp;</a>",(b+fb)%7==fb&&(f+="</tr><tr>",1==gb&&a>h&&(f+="<td align=right>"+u(new Date(U,T,h+1))+"&nbsp;</td>"))}B(".js-calendar-content").innerHTML=f,N?(B(".js-spanMonth").innerHTML="<div class='calendar-down-arrow'></div>"+I[T],B(".js-spanYear").innerHTML="<div class='calendar-down-arrow'></div>"+U):(B(".js-spanMonth").innerHTML=I[T],B(".js-spanYear").innerHTML=U);for(var l=B(".js-day"),g=0;g<l.length;g++)A(l[g],"click",w)}function w(a){a.target||(a.target=a.srcElement),V=a.target.getAttribute("data-day"),e()}function x(){return!sb.classList.contains("calendar--hidden")}function y(a,c,d){if(x())b();else{bb=c,db=d;var e=" ",f=db.split(e);f.length<3&&(e="/",f=db.split(e),f.length<3&&(e=".",f=db.split(e),f.length<3&&(e="-",f=db.split(e),f.length<3&&(e=""))));var g=0;if(""!=e){var h="";h=c.value?c.value.split(e):c.innerHTML.split(e);for(var i=0;3>i;i++)if("d"==f[i]||"dd"==f[i])V=parseInt(h[i],10),g++;else if("m"==f[i]||"mm"==f[i])T=parseInt(h[i],10)-1,g++;else if("yyyy"==f[i])U=parseInt(h[i],10),g++;else if("mmm"==f[i])for(var j=0;12>j;j++)h[i]==I[j]&&(T=j,g++)}(3!=g||isNaN(V)||isNaN(T)||isNaN(U))&&(V=ob,T=pb,U=qb),Y=V,W=T,X=U;var k=a;do k=k.offsetParent;while("BODY"!=k.tagName);v(1,T,U),sb.classList.remove("calendar--hidden"),mb=!0}cb=a}function z(a){for(;;){if(!a.parentElement)return!1;if(a.parentElement==Q)return!0;a=a.parentElement}}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b){void 0===b&&(b=Q);var c=b.querySelectorAll(a);return 0===c.length?null:1===c.length?c[0]:c}var C=a.el,D=a.host,E=void 0===a.inline?!1:a.inline,F=a.value,G=a.onValueChanged,H=void 0===a.showToday?!0:a.showToday,I=a.months||["January","February","March","April","May","June","July","August","September","October","November","December"],J=a.days||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K=a.goToCurrentDate||"Go To Current date",L=a.todayString||"Today is",M=void 0===a.startAtMonday?!0:a.startAtMonday,N=void 0===a.showMonthAndYearPickers?!1:a.showMonthAndYearPickers,O=a.format||"dd/mm/yyyy";E=!1;var P=this,Q=document.createElement("div");Q.className="calendar-web-widget",D?D.appendChild(Q):C.parentNode.insertBefore(Q,C.nextSibling);var R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb=M?1:0,gb=0,hb="Wk",ib=!1,jb=!1,kb=!1,lb=!1,mb=!1,nb=null;nb=F?new Date(Date.parse(F.replace(/-/g,"/"))):new Date;var ob=nb.getDate(),pb=nb.getMonth(),qb=nb.getYear();3===qb.toString().length&&(qb+=1900),M&&(J.push(J[0]),J.splice(0,1));var rb="<div class='js-calendar-container calendar-container "+(E?"calendar--inline":"calendar--float")+"'><div class='js-calendar-header calendar-header'></div><div class='js-calendar-content calendar-content'></div>";H&&(rb+="<div class='js-calendar-footer calendar-footer'></div>"),rb+="</div>",Q.innerHTML=rb;var sb=B(".js-calendar-container");rb="<div class='js-calendar-prev calendar-header-item calendar-prev'><div class='calendar-left-arrow'></div></div>",N?(rb+="<div class='calendar-header-item'><div class='js-calendar-month-container calendar-month-container calender-pointer '><div class='js-spanMonth'></div><div class='js-selectMonth calendar-dropdown-container'></div></div></div>",rb+="<div class='calendar-header-item'><div class='js-calendar-year-container calendar-year-container calender-pointer'><div class='js-spanYear'></div><div class='js-selectYear calendar-dropdown-container'></div></div></div>"):rb+="<div class='calendar-header-item'><span class='js-spanMonth calender-selected-month'></span><span class='js-spanYear'></span></div>",rb+="<div class='js-calendar-next calendar-header-item calendar-next'><div class='calendar-right-arrow'></div></div>",B(".js-calendar-header").innerHTML=rb,N&&(R=B(".js-selectMonth"),S=B(".js-selectYear")),H&&(B(".js-calendar-footer").innerHTML=L+" <a title='"+K+"' class='js-focus-today' href='javascript:void(0)'>"+J[nb.getDay()-fb==-1?6:nb.getDay()-fb]+", "+ob+" "+I[pb].substring(0,3)+"	"+qb+"</a>"),b(),A(document,"keypress",function(){27==event.keyCode&&b()}),A(document,"click",function(a){a.target||(a.target=a.srcElement),a.target!=C&&mb&&!z(a.target)&&b()});var tb=B(".js-focus-today");tb&&A(tb,"click",function(){T=pb,U=qb,v()}),N&&(A(B(".js-calendar-year-container"),"click",function(){lb?s():t()}),A(B(".js-calendar-month-container"),"click",function(){jb?m():l()}));var ub=B(".js-calendar-prev");A(ub,"click",i),A(ub,"mouseout",function(){clearInterval(Z)}),A(ub,"mousedown",function(){clearTimeout(_),_=setTimeout(f,500)}),A(ub,"mouseup",function(){clearTimeout(_),clearInterval(Z)});var vb=B(".js-calendar-next");A(vb,"click",h),A(vb,"mouseout",function(){clearInterval(Z)}),A(vb,"mousedown",function(){clearTimeout(_),_=setTimeout(g,500)}),A(vb,"mouseup",function(){clearTimeout(_),clearInterval(Z)}),A(C,"click",function(){y(C,C,O)})};